<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Writing good code 1 - Naming, comments, functions, and the DRY principle | Konstantin Gregor </title> <meta name="author" content="Konstantin Gregor"> <meta name="description" content="Some crucial tips on how to create readable and testable code"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://k-gregor.github.io/blog/2024/good-code-1-proper-naming-in-scientific-code/"> <script src="/assets/js/theme.js?a5ca4084d3b81624bcfa01156dae2b8e"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Konstantin</span> Gregor </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/courses/">courses </a> </li> <li class="nav-item "> <a class="nav-link" href="/funstuff/">fun stuff </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Writing good code 1 - Naming, comments, functions, and the DRY principle</h1> <p class="post-meta"> Created on October 05, 2024 </p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/code"> <i class="fa-solid fa-hashtag fa-sm"></i> code</a>     ·   <a href="/blog/category/code"> <i class="fa-solid fa-tag fa-sm"></i> code</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <p>Scientists are not software developers, yet we often do write software. This could include simple data pre-processing scripts, complex data analyses, or full scientific models. Here I want to highlight some critical aspects of professional software development and how they could be applied in scientific programming.</p> <h2 id="proper-naming">Proper Naming</h2> <p>A trivial yet essential aspect of understandable code is proper naming. In scientific code, one often comes across variables called <code class="language-plaintext highlighter-rouge">x</code>, <code class="language-plaintext highlighter-rouge">y</code>, <code class="language-plaintext highlighter-rouge">xx</code>, or <code class="language-plaintext highlighter-rouge">ys</code>. But there is no cost in using descriptive names such as <code class="language-plaintext highlighter-rouge">years_since_2000</code> or <code class="language-plaintext highlighter-rouge">mean_surface_temperatures</code> which immediately indicate what they contain. Exceptions are known formulas, where the variable names should be as in the formula. For instance, \(E=mc^2\) does not need to be written as <code class="language-plaintext highlighter-rouge">energy = mass * light_speed * light_speed</code>.</p> <p>Proper variable naming is the number one step to making your code readable and understandable. Check out the following code. It is simple, yet you have no idea what is going on there:</p> <figure class="highlight"><pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr>
<td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td> <td class="code"><pre><span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="n">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="n">pandas</span> <span class="k">as</span> <span class="n">pd</span>

<span class="n">a</span> <span class="o">=</span> <span class="mf">0.02</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">xx</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">yy</span> <span class="o">=</span> <span class="n">b</span>\<span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">a</span><span class="p">)</span>\<span class="o">*</span>\<span class="o">*</span><span class="n">xx</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">xx</span><span class="p">,</span> <span class="n">yy</span><span class="p">);</span>
</pre></td> </tr></tbody></table></code></pre></figure> <p>Comments might make this code more understandable. But still, if we use the variable <code class="language-plaintext highlighter-rouge">a</code> at another point in the code, we’d have no idea what we’re dealing with and have to go back to the declaration to find out:</p> <figure class="highlight"><pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr>
<td class="gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td> <td class="code"><pre><span class="n">a</span> <span class="o">=</span> <span class="mf">0.02</span> <span class="c1"># interest rate
</span><span class="n">b</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># initial investment
</span><span class="n">xx</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="c1"># years
</span><span class="n">yy</span> <span class="o">=</span> <span class="n">b</span>\<span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">a</span><span class="p">)</span>\<span class="o">*</span>\<span class="o">*</span><span class="n">xx</span> <span class="c1"># money value after x years
</span><span class="n">plt</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">xx</span><span class="p">,</span> <span class="n">yy</span><span class="p">);</span>
</pre></td> </tr></tbody></table></code></pre></figure> <p>With proper variable names, the code is easy to understand:</p> <figure class="highlight"><pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr>
<td class="gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td> <td class="code"><pre><span class="n">interest_rate</span> <span class="o">=</span> <span class="mf">0.02</span>
<span class="n">initial_investment</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">time_years</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">all_that_money_in_my_bank_account</span> <span class="o">=</span> <span class="n">initial_investment</span>\<span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">interest_rate</span><span class="p">)</span>\<span class="o">*</span>\<span class="o">*</span><span class="n">time_years</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">time_years</span><span class="p">,</span> <span class="n">all_that_money_in_my_bank_account</span><span class="p">);</span>
</pre></td> </tr></tbody></table></code></pre></figure> <h2 id="avoid-magic-numbers">Avoid magic numbers</h2> <p>Another trivial, yet often ignored, rule is to avoid “magic numbers”. These are numbers in the code that are not explained. For instance, what is going on here?</p> <figure class="highlight"><pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr>
<td class="gutter gl"><pre class="lineno">1
2
</pre></td> <td class="code"><pre><span class="n">time</span> <span class="o">=</span> <span class="n">time</span> <span class="n">_</span> <span class="mi">86400</span>
<span class="n">emissions</span> <span class="o">=</span> <span class="n">emissions</span> <span class="n">_</span> <span class="mf">44.01</span><span class="o">/</span><span class="mf">12.011</span>
</pre></td> </tr></tbody></table></code></pre></figure> <div class="caption"> It is hard to understand what this code is doing. What to these magic numbers like 44.01 or 86400 mean? </div> <p>Instead of writing numbers directly it is much clearer to store the numbers in understandable constants like so:</p> <figure class="highlight"><pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr>
<td class="gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td> <td class="code"><pre><span class="n">SECONDS_PER_DAY</span> <span class="o">=</span> <span class="mi">60</span> <span class="n">_</span> <span class="mi">60</span> <span class="n">_</span> <span class="mi">24</span>
<span class="n">time_days</span> <span class="o">=</span> <span class="n">time_seconds</span> \<span class="o">*</span> <span class="n">SECONDS_PER_DAY</span>

<span class="n">CONVERSION_C_TO_CO2</span> <span class="o">=</span> <span class="mf">44.01</span><span class="o">/</span><span class="mf">12.011</span>
<span class="n">co2_emissions</span> <span class="o">=</span> <span class="n">c_emissions</span> \<span class="o">*</span> <span class="n">CONVERSION_C_TO_CO2</span>
</pre></td> </tr></tbody></table></code></pre></figure> <div class="caption"> The code is much clearer when magic numbers are extracted into well-named constants. </div> <h2 id="perks-and-pitfalls-of-comments">Perks and Pitfalls of comments</h2> <p>Comments are helpful to explain code, as was also shown above. However, it often happens that comments are outdated because people forget to adapt them when code is changed. Therefore, proper naming should make the code the first means of documentation and render additional comments unnecessary.</p> <p>In scientific models, comments can be used to add citations as to where a formula comes from. Furthermore, comments can be vital in explaining complex parts of the code. However, it needs to be kept in mind that comments are maintained with the rest of the code to avoid inconsistencies between the two that would lead to confusion. At the end of the article, there will be an example containing useful commenting.</p> <p>A final note is that code should never be used <strong>“out-commented”</strong> as this will only lead to confusion why this code is currently not in use. Version control (like <code class="language-plaintext highlighter-rouge">git</code> or <code class="language-plaintext highlighter-rouge">svn</code>) allows deleting the code with a commit message explaining why it was deleted. If it happens that the code is needed again, this commit can be reverted.</p> <figure class="highlight"><pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr>
<td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td> <td class="code"><pre><span class="k">for</span> <span class="n">person</span> <span class="ow">in</span> <span class="n">person_list</span><span class="p">:</span>
<span class="n">person</span><span class="p">.</span><span class="nf">calculate_something</span><span class="p">()</span>

      <span class="c1"># person.do_the_thing()
</span>      <span class="c1"># person.money = 1000
</span>
      <span class="n">person</span><span class="p">.</span><span class="n">money</span> <span class="o">=</span> <span class="mi">500</span>
      <span class="n">person</span><span class="p">.</span><span class="nf">do_other_thing</span><span class="p">()</span>
</pre></td> </tr></tbody></table></code></pre></figure> <div class="caption"> My buddy at my old job would call this a "Nonononono!". Other scientists (or you in 1 year!) seeing this code will not understand why we don't to **the thing** anymore, and why the `person` only gets 500 moneys now. Delete the code, write a proper commit message, the change will be easy to understand. </div> <h2 id="the-dry-principle-dont-repeat-yourself">The DRY Principle (Don’t Repeat Yourself)</h2> <p>Repetition in code is not only a source of clutter, but also a critical source of errors. If the same piece of code exists in multiple places of the model and needs changing, chances are that one forgets to change it in all places. Therefore, such code should be extracted into well-named functions with well-named parameters that can be called from anywhere from the model. When the logic needs changing, we only need to change it in one place. This is especially important for other developers who might have to adapt that code. Other than you, they might now know that they need to do the same change in multiple places! Well-named functions also make the code easier to read, understand, and test. For instance we can easily write a test that checks whether the code from above does what it is supposed to, when this code is extracted into a nice function:</p> <figure class="highlight"><pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr>
<td class="gutter gl"><pre class="lineno">1
2
</pre></td> <td class="code"><pre><span class="k">def</span> <span class="nf">calculate_bank_account_value</span><span class="p">(</span><span class="n">initial_investment</span><span class="p">,</span> <span class="n">interest_rate</span><span class="p">,</span> <span class="n">time_in_years</span><span class="p">):</span>
<span class="k">return</span> <span class="n">initial_investment</span>\<span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">interest_rate</span><span class="p">)</span>\<span class="o">*</span>\<span class="o">*</span><span class="n">time_in_years</span>
</pre></td> </tr></tbody></table></code></pre></figure> <p>In languages like Python you can even make use of the named function parameters to have a very understandable function call:</p> <figure class="highlight"><pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr>
<td class="gutter gl"><pre class="lineno">1
</pre></td> <td class="code"><pre><span class="nf">calculate_bank_account_value</span><span class="p">(</span><span class="n">initial_investment</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">interest_rate</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span> <span class="n">time_in_years</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
</pre></td> </tr></tbody></table></code></pre></figure> <p>Another benefit is that such functions are easily testable. We’ll have another post on that topic soon.</p> <p>In the case of data processing workflows, things might be a bit different. You might have similar workflows for similar data inputs and the obvious thing is to simply copy the code and adapt it as necessary instead of making it generic. If it is only used once it might also be too much effort to spend lots of time on refactoring it into reusable functions. Nonetheless, the DRY principle should always be kept in mind. With modern IDEs, extraction of methods is also not a time-consuming task and it helps clarify that the code does what it’s supposed to do. This will help when workflows have to be run again, for instance when things pop during the review process of a paper.</p> <p>Another point where the DRY principle holds in science is when sharing code. Often, someone has a script that they can email to you that will do the data processing you need to do. But this is obviously a way of repeating oneself. Now imagine that you find a bug in the script. How will it be made sure that everyone is informed about the fix? The blog post of Miles McBain (2024) discusses some ideas on how to tackle this.</p> <h2 id="a-holistic-example">A holistic example</h2> <p>Compare the two logically identical implementations of a zero-dimensional energy balance model below. The first one does the job, but it is quite hard to undestand what’s going on, isn’t it?</p> <figure class="highlight"><pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr>
<td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre></td> <td class="code"><pre><span class="n">T</span> <span class="o">=</span> <span class="mi">200</span>

<span class="c1"># using heat capacity C [J/m^2/K] for 100m deep water as example
</span>
<span class="n">C</span> <span class="o">=</span> <span class="mf">4.0e+08</span>  
 <span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.3</span>  
 <span class="n">epsilon_earth</span> <span class="o">=</span> <span class="mi">1</span>  
 <span class="n">epsilon_atm</span> <span class="o">=</span> <span class="mf">0.77</span>  
 <span class="n">sigma</span> <span class="o">=</span> <span class="mf">5.67E-8</span>

<span class="n">ghe</span> <span class="o">=</span> <span class="bp">False</span>

<span class="n">TT</span> <span class="o">=</span> <span class="p">[]</span>  
 <span class="n">tt</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">):</span>

      <span class="n">T_atm</span> <span class="o">=</span> <span class="n">T</span><span class="o">/</span><span class="mi">2</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span>
      <span class="c1"># compute radiative imbalance by subtracting outgoing
</span>      <span class="c1"># longwave from incoming shortwave radiation
</span>      <span class="n">add</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1368</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">alpha</span><span class="p">)</span><span class="o">/</span><span class="mi">4</span> <span class="o">-</span> <span class="n">epsilon_earth</span> <span class="o">*</span> <span class="n">sigma</span> <span class="o">*</span> <span class="nf">pow</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

      <span class="k">if</span> <span class="n">ghe</span><span class="p">:</span> <span class="c1"># if greenhouse effect should be included
</span>        <span class="n">add</span> <span class="o">+=</span> <span class="n">epsilon_atm</span> <span class="o">*</span> <span class="n">sigma</span> <span class="o">*</span> <span class="nf">pow</span><span class="p">(</span><span class="n">T_atm</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

      <span class="n">T</span> <span class="o">+=</span> <span class="mi">60</span><span class="o">*</span><span class="mi">60</span><span class="o">*</span><span class="mi">24</span><span class="o">*</span><span class="mi">365</span><span class="o">*</span><span class="n">add</span><span class="o">/</span><span class="n">C</span>
      <span class="n">T2</span> <span class="o">=</span> <span class="n">T</span> <span class="o">-</span> <span class="mf">273.15</span>

      <span class="n">tt</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
      <span class="n">TT</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">T2</span><span class="p">)</span>
</pre></td> </tr></tbody></table></code></pre></figure> <div class="caption"> This zero-dimensional energy balance model is hard to understand. Compare this with the same model with extracted functions and proper variable naming in the snippet below. </div> <p>In the second snippet, parts of the code are extracted into well-named functions, magic numbers are stored in constants and variable names are descriptive. Note also the <code class="language-plaintext highlighter-rouge">if</code> statement that previously required an explaining comment which is now replaced by a speaking variable making the explanation unnecessary. Someone reading the code will understand it much faster than the first version. These functions can not only be re-used in other parts of the model, they can also be easily tested. This contributes to better maintainability and error-avoidance.</p> <figure class="highlight"><pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr>
<td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
</pre></td> <td class="code"><pre><span class="n">SIGMA</span> <span class="o">=</span> <span class="mf">5.67E-8</span> <span class="c1"># Stefan-Boltzmann constant [W/m2]  
</span> <span class="n">SOLAR_RADIATION</span> <span class="o">=</span> <span class="mi">1368</span> <span class="c1"># [W/m2]  
</span> <span class="n">SECONDS_PER_YEAR</span> <span class="o">=</span> <span class="mi">60</span><span class="o">*</span><span class="mi">60</span><span class="o">*</span><span class="mi">24</span>\<span class="o">*</span><span class="mi">365</span> <span class="c1"># [s]
</span>
<span class="n">T_surface_K</span> <span class="o">=</span> <span class="mi">200</span>

<span class="c1"># using heat capacity C [J/m^2/K] for 100m deep water as example
</span>
<span class="n">C</span> <span class="o">=</span> <span class="mf">4.0e+08</span>
<span class="n">albedo_earth</span> <span class="o">=</span> <span class="mf">0.3</span> <span class="c1"># unitless  
</span> <span class="n">epsilon_earth</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># emissivity, unitless  
</span> <span class="n">epsilon_atmosphere</span> <span class="o">=</span> <span class="mf">0.77</span> <span class="c1"># emissivity, unitless
</span>
<span class="n">include_greenhouse_effect</span> <span class="o">=</span> <span class="bp">True</span>

<span class="n">surface_temperatures</span> <span class="o">=</span> <span class="p">[]</span>  
 <span class="n">timesteps_years</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">def</span> <span class="nf">incoming_shortwave_radiation</span><span class="p">(</span><span class="n">alpha</span><span class="p">):</span>  
 <span class="c1"># dividing by 4 to map from circle to sphere  
</span> <span class="k">return</span> <span class="n">SOLAR_RADIATION</span>\<span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">alpha</span><span class="p">)</span><span class="o">/</span><span class="mi">4</span>

<span class="k">def</span> <span class="nf">outgoing_longwave_radiation</span><span class="p">(</span><span class="n">temperature_K</span><span class="p">,</span> <span class="n">epsilon</span><span class="p">):</span>  
 <span class="c1"># Boltzmann (1884)
</span><span class="k">return</span> <span class="n">epsilon</span> <span class="n">_</span> <span class="n">SIGMA</span> <span class="n">_</span> <span class="nf">pow</span><span class="p">(</span><span class="n">temperature_K</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

<span class="c1"># See model description paper section 1.2 for details
</span>
<span class="k">def</span> <span class="nf">compute_atmospheric_temperature</span><span class="p">(</span><span class="n">surface_temperature</span><span class="p">):</span>  
 <span class="k">return</span> <span class="n">surface_temperature</span><span class="o">/</span><span class="mi">2</span>\<span class="o">*</span>\<span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">convert_kelvin_to_celsius</span><span class="p">(</span><span class="n">temp_K</span><span class="p">):</span>  
 <span class="k">return</span> <span class="n">temp_K</span> <span class="o">-</span> <span class="mf">273.15</span>

<span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">):</span>

      <span class="n">radiative_imbalance_surface</span> <span class="o">=</span> <span class="nf">incoming_shortwave_radiation</span><span class="p">(</span><span class="n">albedo_earth</span><span class="p">)</span>
                              <span class="o">-</span> <span class="nf">outgoing_longwave_radiation</span><span class="p">(</span><span class="n">T_surface_K</span><span class="p">,</span> <span class="n">epsilon_earth</span><span class="p">)</span>

      <span class="k">if</span> <span class="n">include_greenhouse_effect</span><span class="p">:</span>
          <span class="n">reflected_longwave_radiation</span> <span class="o">=</span> <span class="nf">outgoing_longwave_radiation</span><span class="p">(</span>
            <span class="nf">compute_atmospheric_temperature</span><span class="p">(</span><span class="n">T_surface_K</span><span class="p">),</span> <span class="n">epsilon_atmosphere</span><span class="p">)</span>
          <span class="n">radiative_imbalance_surface</span> <span class="o">+=</span> <span class="n">reflected_longwave_radiation</span>

      <span class="n">T_surface_K</span> <span class="o">+=</span> <span class="n">SECONDS_PER_YEAR</span> <span class="o">*</span> <span class="n">radiative_imbalance_surface</span> <span class="o">/</span> <span class="n">C</span>

      <span class="n">timesteps_years</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
      <span class="n">surface_temperatures</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="nf">convert_kelvin_to_celsius</span><span class="p">(</span><span class="n">T_surface_K</span><span class="p">))</span>
</pre></td> </tr></tbody></table></code></pre></figure> <div class="caption"> This is the same model as in the code snippet above. However, upon first look it is easily understandable what is happening in the model. Note that I decided to not extract `273.15` into a constant, simply because the function name already makes it clear what it happening. This code example was created building on the work of multiple online resources (Boergel, 2024; Mann &amp; Gaudet, 2024; Rose &amp; Scott-Brown, 2024). </div> <h1 id="conclusion">Conclusion</h1> <p>I hope this post, and especially the final example, could show you that it is quite simple to make code easily understandable. The little effort it takes will definitely be worth it, because it will save a lot of time when you or someone else has to revisit your code.</p> <p>I believe that this still remaind valid in times of chatGPT and other code generation tools. Having the code well-readable and broken down into well-defined functions will help you ensure that the code is actually logically correct, and easily maintainable.</p> <h1 id="references">References</h1> <ul> <li>Boergel, F. (2024). Climate of the ocean. <a href="https://florianboergel.github.io/climateoftheocean" rel="external nofollow noopener" target="_blank">https://florianboergel.github.io/climateoftheocean</a> </li> <li>Mann, M., &amp; Gaudet, B. (2024). Meteo 469: From Meteorology to Mitigation: Understanding Global Warming. <a href="https://www.e-education.psu.edu/meteo469/" rel="external nofollow noopener" target="_blank">https://www.e-education.psu.edu/meteo469/</a> </li> <li>McBain, M. (2024). Before I Sleep: Patterns and anti-patterns of data analysis reuse. <a href="https://milesmcbain.com/posts/data-analysis-reuse/" rel="external nofollow noopener" target="_blank">https://milesmcbain.com/posts/data-analysis-reuse/</a> </li> <li>Rose, B. E. J., &amp; Scott-Brown, J. (2024). The Climate Laboratory. <a href="https://doi.org/10.5281/zenodo.10552644" rel="external nofollow noopener" target="_blank">https://doi.org/10.5281/zenodo.10552644</a> </li> </ul> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/good-code-2-solid-principles/">Writing good code 2 - the SOLID principles applied to scientific code</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/memory-aspects-in-scientific-coding/">Memory aspects in scientific coding</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/radiative-forcing/">A comprehensive explanation of radiative forcing and friends</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/life-hacks-for-a-successful-phd/">9 life hacks for a successful PhD (or other knowledge work)</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Konstantin Gregor. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?b7816bd189846d29eded8745f9c4cf77"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.min.js"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-12YX5QG8PE"></script> <script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-12YX5QG8PE");</script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>